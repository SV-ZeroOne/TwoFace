<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Orders</title>

    <link href="/App/Assets/CSS/MainStyleSheet.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
    <script src="http://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.10.0.min.js"></script>
    <link href="/App/Assets/CSS/xeditable.min.css" rel="stylesheet">
    <script src="/App/Assets/JS/xeditable.min.js"></script>
    <script src="ordersController4.js"></script>


</head>
<body ng-app="ordersModule" ng-controller="ordersController4 as $octrl">

    <div ng-include="'/App/Assets/Views/navbar.html'"></div>
    <h1>Orders</h1>

    <button ng-click="$octrl.showNewOrder()">Make New Order</button>
    <div ng-show="$octrl.showMe" ng-submit="$octrl.placeOrder()">
        <form name="newOrderForm">
            Issue ID: <input type="number" name="newIssueID" ng-model="$octrl.newOrder.issueID" required />
            Quantity: <input type="number" name="newQuantity" ng-model="$octrl.newOrder.qtyOrdered" required />
            Supplier ID: <input type="number" name="newSupplier" ng-model="$octrl.newOrder.supplierID" required />
            <button type="submit">Place Order</button>
        </form>
    </div>

    <table class="table table-bordered table-hover table-condensed">
        <tr style="font-weight: bold">
            <td style="width:10%">Order ID</td>
            <td style="width:10%">Order Date</td>
            <td style="width:10%">Issue ID</td>
            <td style="width:10%">Qty Ordered</td>
            <td style="width:10%">Total</td>
            <td style="width:10%">Supplier ID</td>
            <td style="width:10%">Shipment Ref</td>
            <td style="width:10%">Shipment Date</td>
            <td style="width:10%">Delivery Status</td>
            <td style="width:10%">Edit</td>
        </tr>
        <tr ng-repeat="order in $octrl.someOrders.Data">
            <td>
                    {{ order.OrderID || 'empty' }}
            </td>
            <td>
                <span editable-text="order.OrderDate" e-name="OrderDate" e-form="rowform" onbeforesave="checkName($data, order.OrderDate)">
                    {{ order.OrderDate || 'empty' }}
                </span>
            </td>
            <td>
                <span editable-text="order.IssueID" e-name="IssueID" e-form="rowform" >
                    {{ order.IssueID || 'empty' }}
                </span>
            </td>
            <td>
                <span editable-text="order.QtyOrdered" e-name="QtyOrdered" e-form="rowform" >
                    {{ order.QtyOrdered || 'empty' }}
                </span>
            </td>
            <td>
                <span editable-text="order.Total" e-name="Total" e-form="rowform" >
                    {{ order.Total || 'empty' }}
                </span>
            </td>
            <td>
                <span editable-text="order.SupplierID" e-name="SupplierID" e-form="rowform" >
                    {{ order.SupplierID || 'empty' }}
                </span>
            </td>
            <td>
                <span editable-text="order.ShipmentRef" e-name="ShipmentRef" e-form="rowform" >
                    {{ order.ShipmentRef || 'empty' }}
                </span>
            </td>
            <td>
                <span editable-text="order.ShipmentDate" e-name="ShipmentDate" e-form="rowform" >
                    {{ order.ShipmentDate || 'empty' }}
                </span>
            </td>
            <td>
                <span editable-text="order.DeliveryStatus" e-name="DeliveryStatus" e-form="rowform" >
                    {{ order.DeliveryStatus || 'empty' }}
                </span>
            </td>
            <td style="white-space: nowrap">
                <!-- form -->
                <form editable-form name="rowform" onbeforesave="$octrl.saveOrder($data, order.OrderID)" ng-show="rowform.$visible" class="form-buttons form-inline" shown="inserted == order">
                    <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-primary">
                        save
                    </button>
                    <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-default">
                        cancel
                    </button>
                </form>
                <div class="buttons" ng-show="!rowform.$visible">
                    <button type="button" class="btn btn-primary" ng-click="rowform.$show()">edit</button>
                    <button type="button" class="btn btn-danger" ng-click="$octrl.removeOrder($index, order.OrderID)">del</button>
                </div>
            </td>
        </tr>
    </table>
    <pagination class="pagination-sm" boundary-link-numbers="true" boundary-links="true" ng-change="$octrl.pageChanged()" ng-model="$octrl.paginationPage" num-pages="$octrl.noOfPages" max-size="10" total-items="$octrl.totalItems" page="$octrl.currentPage" items-per-page="50" class="pagination-sm nomargin" ></pagination>
    <button type="button" class="btn btn-default" ng-click="addOrder()">Add row</button>

</body>
</html>